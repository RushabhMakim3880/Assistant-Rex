# 3.3 API & Tooling Reference

---

## 1. Internal Socket.IO API
Communication between Frontend and Backend.

### Client -> Server (Events)
*   **`start_audio`**: Starts the mic listener.
*   **`stop_audio`**: Stops the listener.
*   **`command`**: Sends a text command directly (bypassing STT).

### Server -> Client (Events)
*   **`audio_intensity`**: `float` (0.0 - 1.0). Controls visualizer pulse.
*   **`transcription`**: `string`. Real-text of what user said.
*   **`response`**: `string`. AI's text response.
*   **`state_update`**: `string` ('idle', 'listening', 'thinking', 'speaking').

## 2. Tool Definition Schema (Gemini)
Tools are defined in `backend/rex.py` using JSON schema.

```json
{
  "name": "generate_cad",
  "description": "Generates a 3D CAD model based on a prompt.",
  "parameters": {
    "type": "OBJECT",
    "properties": {
      "prompt": {"type": "STRING"}
    },
    "required": ["prompt"]
  }
}
```

## 3. Automation Hooks
*   **`subprocess`**: Used for `cmd` execution.
*   **`webbrowser`**: Used for opening URLs.
*   **`pyautogui`**: (Optional) Used for mouse/keyboard simulation.

## 4. Rate Limits & Constraints
*   **Gemini API:**
    *   **RPM (Requests Per Minute):** Dependent on API Key tier (Free: 60 RPM, Pay-as-you-go: Higher).
    *   **TPM (Tokens Per Minute):** ~1 Million (Flash model).
*   **Tool Execution:**
    *   **Timeout:** Tools have a hard 30-second execution timeout to prevent UI freezes.
